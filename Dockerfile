# I opted to use the current-alpine3.17 image because the Debian builds have too many CVEs for my liking
FROM node:current-alpine3.17

WORKDIR /usr/src/projects
RUN chown -R node:node /usr/src/projects

# Move over all the source code and install the dependencies
COPY . .
RUN npm install -g mocha
RUN npm install

# Expose the port and run the app
EXPOSE 3000
CMD npm test; npm start

#      ####                                                                       
#     #////#                                                                      
#     #////#                                                                      
#      (///(                                                                      
#      #/////////////((                                                           
#    #//////////////////(%%%%%%%#                                                 
#   #///////////(%%%%%%%%%%%%%%%%%%%%#                                            
#   #//(%%%(////%%%%%%%%%%%%%%%%%%%%%%%%#                                         
#   (/%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                       
#   #%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                      
#   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                     
#  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                    
# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                    
# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                    
# %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                                   
#  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%/                              
#  *%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*(                        
#    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*                 
#     /%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*           
#        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        
#            /%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%,      
#                 (%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%,     
#                   #%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%,    
#                     (%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
#                        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   
#                          %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
#                            #%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
#                               %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
#                                 #%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
#                                    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
#                                       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
#                                           %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  
#                                               %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
#                                                    %%%%%%%%%%%%%%%%%%%%%%       